<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ò—Ç–æ–≥–æ–≤—ã–π —Ç–µ—Å—Ç: 7 –∫–ª–∞—Å—Å</title>
    <style>
        :root { --primary: #1a73e8; --success: #27ae60; --danger: #d32f2f; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; padding: 15px; display: flex; justify-content: center; }
        #quiz-card { background: white; max-width: 700px; width: 100%; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); box-sizing: border-box; }
        
        /* –ö—Ä—É–≥–æ–≤–∞—è —à–∫–∞–ª–∞ */
        .circle-container { display: flex; justify-content: center; align-items: center; margin: 20px 0; position: relative; }
        .progress-ring { transform: rotate(-90deg); }
        .progress-ring__circle { stroke-dasharray: 314; stroke-dashoffset: 314; transition: stroke-dashoffset 1.5s ease; stroke-linecap: round; }
        .score-text { position: absolute; font-size: 2.2rem; font-weight: bold; text-align: center; }
        .score-text span { display: block; font-size: 0.8rem; color: #666; font-weight: normal; }

        /* –≠–ª–µ–º–µ–Ω—Ç—ã —Ç–µ—Å—Ç–∞ */
        .question { margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-left: 5px solid var(--primary); border-radius: 8px; }
        label { display: block; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 10px; cursor: pointer; }
        input[type="radio"] { transform: scale(1.2); margin-right: 10px; }
        button { width: 100%; padding: 16px; background: var(--primary); color: white; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: bold; cursor: pointer; }
        
        /* –°—Ä–∞–≤–Ω–µ–Ω–∏–µ */
        .comp-bar { height: 10px; background: #eee; border-radius: 5px; margin: 20px 0; position: relative; }
        .comp-point { width: 4px; height: 20px; background: #333; position: absolute; top: -5px; transition: 1s; }

        #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 10000; text-align: center; padding-top: 100px; }
        .hidden { display: none; }
        .review-item { margin-bottom: 10px; padding: 10px; border-bottom: 1px solid #eee; font-size: 0.9rem; }
    </style>
</head>
<body>

<div id="overlay">
    <h1 style="color:red">–í–ù–ò–ú–ê–ù–ò–ï!</h1>
    <p>–í—ã –ø–æ–∫–∏–Ω—É–ª–∏ –≤–∫–ª–∞–¥–∫—É —Ç–µ—Å—Ç–∞. –ü–æ–ø—ã—Ç–∫–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è!</p>
    <button onclick="document.getElementById('overlay').style.display='none'" style="width:200px">–í–µ—Ä–Ω—É—Ç—å—Å—è</button>
</div>

<div id="quiz-card">
    <div id="step1">
        <h1 style="text-align:center">üî© –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Ç–µ—Å—Ç</h1>
        <div style="background:#fff3cd; color:#856404; padding:15px; border-radius:10px; border:1px solid #ffeeba; margin-bottom:20px;">
            <strong>–í–ù–ò–ú–ê–ù–ò–ï!</strong><br>
            1. –¢–µ—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç 20 –≤–æ–ø—Ä–æ—Å–æ–≤.<br>
            2. –ó–∞ –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç ‚Äî 0.5 –±–∞–ª–ª–∞ (–ú–∞–∫—Å: 10).<br>
            3. <b>–õ—é–±–æ–π –≤—ã—Ö–æ–¥ –∏–∑ –≤–∫–ª–∞–¥–∫–∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ –æ—Ç—á–µ—Ç–µ!</b>
        </div>
        <input type="text" id="name" placeholder="–í–≤–µ–¥–∏—Ç–µ –§–∞–º–∏–ª–∏—é –∏ –ò–º—è" style="width:100%; padding:12px; margin-bottom:15px; border-radius:8px; border:1px solid #ccc; box-sizing:border-box;">
        <button onclick="startTest()">–ù–∞—á–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</button>
    </div>

    <div id="step2" class="hidden">
        <div id="questions-list"></div>
        <button onclick="calculateResults()">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—Ç—É</button>
    </div>

    <div id="step3" class="hidden">
        <h2 style="text-align:center">–†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω</h2>
        <div class="circle-container">
            <svg width="120" height="120" class="progress-ring">
                <circle stroke="#eee" stroke-width="8" fill="transparent" r="50" cx="60" cy="60"/>
                <circle id="circle" stroke="var(--success)" stroke-width="8" fill="transparent" r="50" cx="60" cy="60" class="progress-ring__circle"/>
            </svg>
            <div class="score-text"><span id="res-grade">0</span><span>–∏–∑ 10 –±–∞–ª–ª–æ–≤</span></div>
        </div>
        <div style="text-align:center; font-weight:bold" id="rank"></div>
        <div class="comp-bar"><div id="point" class="comp-point"></div></div>
        <p style="text-align:center; font-size:0.8rem; color:#888">–í–∞—à–∞ –ø–æ–∑–∏—Ü–∏—è –Ω–∞ —à–∫–∞–ª–µ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏</p>
        
        <h3 style="margin-top:30px">–†–∞–∑–±–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤:</h3>
        <div id="review"></div>
        <button onclick="location.reload()" style="background:#666; margin-top:20px">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<script>
    const scriptUrl = "https://script.google.com/macros/s/AKfycbxn7Cr8CVsrXJobEN1CJWBSGUOAq2PdtjR3Hfxia0mCkvTVkA0jK4eS7sHrwoCVlopW/exec";
    let cheats = 0;
    window.onblur = () => { cheats++; document.getElementById('overlay').style.display='block'; };

    const questions = [
        { q: "–§–æ—Ä–º–∞ –∫–∞—Ä–∞–Ω–¥–∞—à–∞ –ø–æ—Å–ª–µ —Ç–æ—á–∏–ª–∫–∏?", a: ["–¶–∏–ª–∏–Ω–¥—Ä–∏—á–µ—Å–∫–∞—è", "–ö–æ–Ω–∏—á–µ—Å–∫–∞—è", "–®–∞—Ä–æ–æ–±—Ä–∞–∑–Ω–∞—è", "–í–∏–Ω—Ç–æ–≤–∞—è"], c: 1 },
        { q: "¬´–°–µ—Ä–¥—Ü–µ¬ª —Ç–æ–∫–∞—Ä–Ω–æ–≥–æ —Å—Ç–∞–Ω–∫–∞?", a: ["–°—Ç–∞–Ω–∏–Ω–∞", "–®–ø–∏–Ω–¥–µ–ª—å", "–≠–ª–µ–∫—Ç—Ä–æ–¥–≤–∏–≥–∞—Ç–µ–ª—å", "–ü–æ–¥—Ä—É—á–Ω–∏–∫"], c: 2 },
        { q: "–î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–∞ –∑–∞–¥–Ω—è—è –±–∞–±–∫–∞?", a: ["–í—Ä–∞—â–µ–Ω–∏–µ", "–û–ø–æ—Ä–∞ –¥–ª–∏–Ω–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π", "–ö—Ä–µ–ø–ª–µ–Ω–∏–µ —Ä–µ–∑—Ü–∞", "–í–∫–ª—é—á–µ–Ω–∏–µ"], c: 1 },
        { q: "–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞–ª–∞ –ø–µ—Ä–µ–¥–Ω–µ–π –±–∞–±–∫–∏?", a: ["–ú–∞—Ö–æ–≤–∏–∫", "–¶–µ–Ω—Ç—Ä", "–®–ø–∏–Ω–¥–µ–ª—å", "–°—É–ø–ø–æ—Ä—Ç"], c: 2 },
        { q: "–¢–∏–ø –ø–µ—Ä–µ–¥–∞—á–∏ –≤ —Å—Ç–∞–Ω–∫–µ?", a: ["–†–µ–º–µ–Ω–Ω–∞—è", "–¶–µ–ø–Ω–∞—è", "–ó—É–±—á–∞—Ç–∞—è", "–ü—Ä—è–º–∞—è"], c: 0 },
        { q: "–û–ø–æ—Ä–∞ –¥–ª—è —Ä–µ–∂—É—â–µ–≥–æ —Ä–µ–∑—Ü–∞?", a: ["–°—Ç–∞–Ω–∏–Ω–∞", "–ö–∞—Ä–µ—Ç–∫–∞", "–ü–æ–¥—Ä—É—á–Ω–∏–∫", "–ö–æ–∂—É—Ö"], c: 2 },
        { q: "–ò–∑–¥–µ–ª–∏—è —Å —Ä–∞–∑–Ω—ã–º –ø—Ä–æ—Ñ–∏–ª–µ–º?", a: ["–§–∞—Å–æ–Ω–Ω—ã–µ", "–õ–∏–Ω–µ–π–Ω—ã–µ", "–ü—Ä–æ—Ñ–∏–ª—å–Ω—ã–µ", "–ì—Ä—É–±—ã–µ"], c: 0 },
        { q: "–ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–º–µ–Ω–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏?", a: ["–û—á–∫–∏", "–ö–æ–∂—É—Ö", "–ü–æ–¥—Ä—É—á–Ω–∏–∫", "–≠–∫—Ä–∞–Ω"], c: 1 },
        { q: "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —á–µ—Ä–Ω–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏?", a: ["–ú–µ–π—Å–µ–ª—å", "–†–µ–π–µ—Ä (–ø–æ–ª—É–∫—Ä—É–≥–ª–∞—è)", "–ü–ª–æ—Å–∫–∞—è", "–î–æ–ª–æ—Ç–æ"], c: 1 },
        { q: "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —á–∏—Å—Ç–æ–≤–æ–π –æ—Ç–¥–µ–ª–∫–∏?", a: ["–ú–µ–π—Å–µ–ª—å (–∫–æ—Å–∞—è)", "–†–µ–π–µ—Ä", "–°–≤–µ—Ä–ª–æ", "–†–∞—à–ø–∏–ª—å"], c: 0 },
        { q: "–ö—Ä–µ–ø–ª–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö –º–∞–ª—ã—Ö –¥–µ—Ç–∞–ª–µ–π?", a: ["–ü–ª–∞–Ω—à–∞–π–±–∞", "–¢—Ä–µ–∑—É–±–µ—Ü", "–ü–∞—Ç—Ä–æ–Ω", "–¶–µ–Ω—Ç—Ä"], c: 2 },
        { q: "–ö—Ä–µ–ø–ª–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö –¢–û–õ–°–¢–´–• –¥–µ—Ç–∞–ª–µ–π?", a: ["–ü–∞—Ç—Ä–æ–Ω", "–ü–ª–∞–Ω—à–∞–π–±–∞", "–¢—Ä–µ–∑—É–±–µ—Ü", "–¶–µ–Ω—Ç—Ä"], c: 1 },
        { q: "–ö—Ä–µ–ø–ª–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö –∑–∞–≥–æ—Ç–æ–≤–æ–∫?", a: ["–ü–∞—Ç—Ä–æ–Ω", "–ü–ª–∞–Ω—à–∞–π–±–∞", "–¢—Ä–µ–∑—É–±–µ—Ü + —Ü–µ–Ω—Ç—Ä", "–†—É–∫–∏"], c: 2 },
        { q: "–ó–∞–∑–æ—Ä –º–µ–∂–¥—É –ø–æ–¥—Ä—É—á–Ω–∏–∫–æ–º –∏ –¥–µ—Ç–∞–ª—å—é?", a: ["0 –º–º", "2‚Äì3 –º–º", "10 –º–º", "50 –º–º"], c: 1 },
        { q: "–î–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–¥—Ä—É—á–Ω–∏–∫–æ–º –ø—Ä–∏ —Å—Ç–∞—á–∏–≤–∞–Ω–∏–∏?", a: ["–ù–∏—á–µ–≥–æ", "–û—Ç–æ–¥–≤–∏–Ω—É—Ç—å", "–ü–æ–¥–≤–µ—Å—Ç–∏ –±–ª–∏–∂–µ", "–£–±—Ä–∞—Ç—å"], c: 2 },
        { q: "–í—ã—Å–æ—Ç–∞ —Å—Ç–∞–Ω–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã?", a: ["–ü–æ—è—Å", "–£—Ä–æ–≤–µ–Ω—å –ª–æ–∫—Ç—è", "–ü–ª–µ—á–∏", "–ö–æ–ª–µ–Ω–∏"], c: 1 },
        { q: "–î–µ–π—Å—Ç–≤–∏–µ –ü–ï–†–ï–î –ø—É—Å–∫–æ–º?", a: ["–°–º–∞–∑–∫–∞", "–ó–∞—Ç–æ—á–∫–∞", "–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤—Ä—É—á–Ω—É—é", "–£–±–æ—Ä–∫–∞"], c: 2 },
        { q: "–¶–≤–µ—Ç –∫–Ω–æ–ø–∫–∏ –í–´–ö–õ–Æ–ß–ï–ù–ò–Ø?", a: ["–ß–µ—Ä–Ω—ã–π", "–ó–µ–ª–µ–Ω—ã–π", "–ö—Ä–∞—Å–Ω—ã–π", "–°–∏–Ω–∏–π"], c: 2 },
        { q: "–ö–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–µ—â–µ–Ω–æ:", a: ["–°–º–æ—Ç—Ä–µ—Ç—å", "–î–µ—Ä–∂–∞—Ç—å —Ä–µ–∑–µ—Ü", "–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Ä—É–∫–æ–π", "–°—Ç–æ—è—Ç—å"], c: 2 },
        { q: "–†—É–∫–∞–≤–∞ —Å–ø–µ—Ü–æ–¥–µ–∂–¥—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:", a: ["–ó–∞—Å—Ç–µ–≥–Ω—É—Ç—ã", "–®–∏—Ä–æ–∫–∏–µ", "–°–≤–æ–±–æ–¥–Ω—ã–µ", "–ó–∞–∫–∞—Ç–∞–Ω—ã"], c: 0 }
    ];

    function startTest() {
        if(!document.getElementById('name').value) return alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è");
        document.getElementById('step1').classList.add('hidden');
        document.getElementById('step2').classList.remove('hidden');
        let h = "";
        questions.forEach((v, i) => {
            h += `<div class="question"><p>${i+1}. ${v.q}</p>`;
            v.a.forEach((opt, idx) => h += `<label><input type="radio" name="q${i}" value="${idx}"> ${opt}</label>`);
            h += `</div>`;
        });
        document.getElementById('questions-list').innerHTML = h;
    }

    function calculateResults() {
        let correct = 0, rev = "";
        questions.forEach((v, i) => {
            let sel = document.querySelector(`input[name="q${i}"]:checked`);
            let idx = sel ? parseInt(sel.value) : -1;
            if(idx === v.c) { correct++; rev += `<div class="review-item">‚úÖ –í–æ–ø—Ä–æ—Å ${i+1}: –í–µ—Ä–Ω–æ</div>`; }
            else { rev += `<div class="review-item">‚ùå –í–æ–ø—Ä–æ—Å ${i+1}: –û—à–∏–±–∫–∞. –ü—Ä–∞–≤–∏–ª—å–Ω–æ: <b>${v.a[v.c]}</b></div>`; }
        });

        let grade = correct * 0.5;
        document.getElementById('step2').classList.add('hidden');
        document.getElementById('step3').classList.remove('hidden');
        document.getElementById('res-grade').innerText = grade.toFixed(1);
        document.getElementById('review').innerHTML = rev;

        // –®–∫–∞–ª–∞ –∏ –∫–æ–ª—å—Ü–æ
        let circle = document.getElementById('circle');
        circle.style.strokeDashoffset = 314 - (grade / 10 * 314);
        document.getElementById('point').style.left = (grade * 10) + "%";
        
        let ranks = ["–ù–æ–≤–∏—á–æ–∫", "–õ—é–±–∏—Ç–µ–ª—å", "–ú–∞—Å—Ç–µ—Ä", "–ü—Ä–æ—Ñ–∏!"];
        document.getElementById('rank').innerText = "–°—Ç–∞—Ç—É—Å: " + ranks[Math.floor(grade/3)] || "–ù–æ–≤–∏—á–æ–∫";

        fetch(scriptUrl, { method: "POST", mode: "no-cors", body: JSON.stringify({ name: document.getElementById('name').value, score: grade + "/10", cheating: "–í—ã—Ö–æ–¥–æ–≤: " + cheats }) });
    }
</script>
</body>
</html>